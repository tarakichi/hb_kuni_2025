<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/clear.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="icon" href="assets/images/favicon_clear.ico">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100;300;500;900&family=Noto+Serif:wght@400;700;900&display=swap" rel="stylesheet">
    <title>Happy Birthday</title>
    <script src="js/clear.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-dark@4/dark.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <h1 class="title">CLEAR</h1>
        <p class="stc">おめでとうメッセージ</p>
        <audio controls>
            <source src="https://firebasestorage.googleapis.com/v0/b/hb-kuni-2025.firebasestorage.app/o/omedetou_shun.m4a?alt=media&token=fdab06a8-744c-44e9-9b22-d84f094fb1c0">
        </audio>
        <div class="code">
            <p class="stc">クリアおめでとうございます</p>
            <p class="stc">ここまで遊んでくれたお礼として</p>
            <p class="stc">アマゾンギフトコードをプレゼントします</p>
            <p class="stc" id="gift-code">読み込み中...</p>
            <p class="stc">お誕生日おめでとうございます</p>
        </div>
    </div>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js";
        import { getFirestore, doc, getDocs, collection } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-firestore.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyAD0b__amCZzxsAaYpimzE6HM4e_MxQZt0",
          authDomain: "hb-kuni-2025.firebaseapp.com",
          projectId: "hb-kuni-2025",
          storageBucket: "hb-kuni-2025.firebasestorage.app",
          messagingSenderId: "983096998062",
          appId: "1:983096998062:web:334a28ecf4ec7e349f553f",
          measurementId: "G-6YLKQSH5ES"
        };
      
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        async function getGiftCodes() {
            try {
                // コレクション参照
                const querySnapshot = await getDocs(collection(db, "gift_codes"));

                // ドキュメントをループ処理
                document.getElementById("gift-code").textContent = querySnapshot.docs[0].data().code;
            } catch (error) {
                console.error("Error getting documents:", error);
            }
        }
        getGiftCodes();
      </script>
</body>
</html>